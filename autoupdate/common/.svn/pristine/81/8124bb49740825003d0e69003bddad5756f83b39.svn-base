#	makefile for module dbconnect generated by pig 
#
TARGET	= libdbconnect.a
INCDIR	= -I../ -I../driver_sybase/sybase_inc -I../../ -I../../../common -I../../../3rd
SRCDIR	= ../
CFLAGS	= $(INCDIR) -D_GNU_SOURCE -D_REENTRANT -DSTATIC_DBC -D_DB_SYBASE_ -fms-extensions -w -fpic -fPIC -g
CPPFLAGS = $(INCDIR) -D_GNU_SOURCE -D_REENTRANT -DSTATIC_DBC -D_DB_SYBASE_ -fms-extensions
LDFLAGS  = -lpthread -lm -ldl 
VPATH	= ../:../:../base:../export:../export/3rd:../export/3rd/sybase:../export/3rd/sybase/debug:../export/3rd/sybase/nondebug:../driver_sybase:../driver_sybase/sybase_inc
OBJS	= \
	baseFieldDescription.o \
	baseConnection.o \
	baseException.o \
	baseQuery.o \
	baseValue.o \
	configFile.o \
	dbconnectExceptions.o \
	dlLoader.o \
	hexDigest.o \
	jDate.o \
	simpleThreads.o \
	dbconnect.o \
	SybaseFieldDescription.o \
	driver_sybase.o \
	sybaseBindParam.o \
	sybaseConnection.o \
	sybaseQuery.o \
	sybaseValue.o 
.PHONY	:	all clean dist help
all:	$(OBJS)
	ar	cru	$(TARGET) $(OBJS) 
	ranlib	$(TARGET)
clean:
	-rm -fr $(TARGET) $(OBJS) $(OBJS:.o=.d)
dist:
	if [ ! -x ../../dist/install/dbconnect ]; then mkdir ../../dist/install/dbconnect; fi
	cp   ../../dist/install/dbconnect/dbconnect 
help:
	echo hello
%.o	: %.cpp
	g++ 	$(CFLAGS) -o $@ -c $<
%.d	: %.cpp
	@g++ -MM $(CPPFLAGS) $< > $@.$$$$; \
	sed 's,\($*\)\.o[:]*,\1.o $@:,g' < $@.$$$$ > $@; \
	rm	-fr $@.$$$$
sinclude	$(OBJS:.o=.d)
